My input test case for nested SWITCH:
a,b;
{
a=5;
b=3;
WHILE a>1
{
WHILE a>4
{
IF a > 1
{
print a;
}
a=a-1;
print a;
}
a=a-1;
print a;
}
SWITCH a
{
CASE 1:
{
SWITCH b
{
CASE 1:
{print a;}
CASE 2:
{print a;}
CASE 3:
{print b;}
}
}
CASE 2:
{print a;}
CASE 3:
{print a;}
DEFAULT:
{print a;}
}
print a;
}
Intermediate code :
a,b
#b2=5,#c2=9,#d1=19,#c1=26,#b1=33,#f1=44,#g1=51,#h1=58,#f2=58,#g2=58,#h2=58,#h1=59,#i1=66,#j1=73,#f2=75,#g2=75,#h2=75,#e2=75,#ia,b;
{
a=5;
b=3;
WHILE a>1
{
WHILE a>4
{
IF a > 1
{
print a;
}
a=a-1;
print a;
}
a=a-1;
print a;
}
SWITCH a
{
CASE 1:
{
SWITCH b
{
CASE 1:
{print a;}
CASE 2:
{print a;}
CASE 3:
{print b;}
}
}
CASE 2:
{print a;}
CASE 3:
{print a;}
DEFAULT:
{print a;}
}
print a;
a,b;
{
a=5;
b=3;
WHILE a>1
{
WHILE a>4
{
IF a > 1
{
print a;
}
a=a-1;
print a;
}
a=a-1;
print a;
}
SWITCH a
{
CASE 1:
{
SWITCH b
{
CASE 1:
{print a;}
CASE 2:
{print a;}
CASE 3:
{print b;}
}
}
CASE 2:
{print a;}
CASE 3:
{print a;}
DEFAULT:
{print a;}
}
print a;
}
LIT 5,0
STO a,0
LIT 3,0
STO b,0
LOD a,0
LIT 1,0
OPR 11,0
JMC #b1,false
LOD a,0
LIT 4,0
OPR 11,0
JMC #c1,false
LOD a,0
LIT 1,0
OPR 11,0
JMC #d1,false
LOD a,0
OPR 21,0
LOD a,0
LIT 1,0
OPR 3,0
STO a,0
LOD a,0
OPR 21,0
JMP #c2,0
LOD a,0
LIT 1,0
OPR 3,0
STO a,0
LOD a,0
OPR 21,0
JMP #b2,0
LOD a,0
LIT 1,0
OPR 15,0
JMC #e1,false
LOD b,0
LIT 1,0
OPR 15,0
JMC #f1,false
LOD a,0
OPR 21,0
JMP #f2,0
LOD b,0
LIT 2,0
OPR 15,0
JMC #g1,false
LOD a,0
OPR 21,0
JMP #g2,0
LOD b,0
LIT 3,0
OPR 15,0
JMC #h1,false
LOD b,0
OPR 21,0
JMP #h2,0
JMP #e2,0
LOD b,0
LIT 2,0
OPR 15,0
JMC #i1,false
LOD a,0
OPR 21,0
JMP #i2,0
LOD b,0
LIT 3,0
OPR 15,0
JMC #j1,false
LOD a,0
OPR 21,0
JMP #j2,0
LOD a,0
OPR 21,0
LOD a,0
OPR 21,0
OPR 0,0
Output generated by interpreter.c :
5
4
3
2
1
3
1